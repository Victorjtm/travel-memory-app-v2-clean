<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->
<!-- COMPONENTE: DETALLE DE VIAJE FUTURO                                  -->
<!-- â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” -->

<div class="viaje-detalle-container">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- CARGANDO                                                           -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="loading" *ngIf="cargando">
        <div class="spinner"></div>
        <p>Cargando viaje...</p>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- ERROR                                                              -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="error" *ngIf="error && !cargando">
        <h2>âŒ Error</h2>
        <p>{{ error }}</p>
        <button class="btn-volver" (click)="volver()">â† Volver</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- CONTENIDO DEL VIAJE                                                -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="viaje-content" *ngIf="viaje && !cargando">

        <!-- HEADER -->
        <div class="viaje-header">
            <button class="btn-back" (click)="volver()">
                â† Volver
            </button>

            <div class="header-actions">
                <button class="btn-eliminar" (click)="eliminarViaje()">
                    ğŸ—‘ï¸ Eliminar viaje
                </button>
            </div>
        </div>

        <!-- INFORMACIÃ“N PRINCIPAL -->
        <div class="viaje-info">
            <div class="info-principal">
                <h1>{{ viaje!.viaje.nombre }}</h1>
                <div class="destino">
                    <span class="icon">ğŸ“</span>
                    <span>{{ viaje!.viaje.destino }}</span>
                </div>
            </div>

            <div class="info-fechas">
                <div class="fecha-item">
                    <span class="label">Inicio</span>
                    <span class="valor">{{ formatearFecha(viaje!.viaje.fecha_inicio) }}</span>
                </div>
                <div class="separador">â†’</div>
                <div class="fecha-item">
                    <span class="label">Fin</span>
                    <span class="valor">{{ formatearFecha(viaje!.viaje.fecha_fin) }}</span>
                </div>
            </div>

            <p class="descripcion" *ngIf="viaje!.viaje.descripcion">
                {{ viaje!.viaje.descripcion }}
            </p>
        </div>

        <!-- ESTADÃSTICAS -->
        <div class="estadisticas">
            <div class="stat-card">
                <div class="stat-icon">ğŸ—“ï¸</div>
                <div class="stat-info">
                    <span class="stat-valor">{{ viaje!.estadisticas.total_dias }}</span>
                    <span class="stat-label">DÃ­as</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">ğŸ¯</div>
                <div class="stat-info">
                    <span class="stat-valor">{{ viaje!.estadisticas.total_actividades }}</span>
                    <span class="stat-label">Actividades</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">ğŸ“Š</div>
                <div class="stat-info">
                    <span class="stat-valor">{{ viaje!.estadisticas.actividades_por_dia }}</span>
                    <span class="stat-label">Por dÃ­a</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">{{ getIconoTipoViaje(viaje!.itinerarios[0]?.tipoDeViaje) }}</div>
                <div class="stat-info">
                    <span class="stat-valor">{{ viaje!.itinerarios[0]?.tipoDeViaje || 'Urbana' }}</span>
                    <span class="stat-label">Tipo</span>
                </div>
            </div>
        </div>

        <!-- ITINERARIOS -->
        <div class="itinerarios-section" *ngIf="viaje!.itinerarios.length > 0">
            <h2>ğŸ“‹ Itinerario General</h2>

            <div class="itinerario-card" *ngFor="let itinerario of viaje!.itinerarios">
                <div class="itinerario-header">
                    <h3>{{ itinerario.descripcionGeneral || 'Sin descripciÃ³n' }}</h3>
                    <span class="duracion">{{ itinerario.duracionDias }} dÃ­as</span>
                </div>

                <div class="itinerario-info">
                    <p><strong>Destinos por dÃ­a:</strong></p>
                    <p class="destinos-dia">{{ itinerario.destinosPorDia }}</p>
                </div>
            </div>
        </div>

        <!-- ACTIVIDADES POR DÃA -->
        <div class="actividades-section" *ngIf="viaje!.actividades.length > 0">
            <h2>ğŸ¯ Actividades Planificadas</h2>

            <div class="dia-grupo" *ngFor="let fecha of getFechasOrdenadas()">
                <h3 class="dia-titulo">
                    ğŸ“… {{ formatearFecha(fecha) }}
                </h3>

                <div class="actividades-lista">
                    <div class="actividad-card" *ngFor="let actividad of agruparActividadesPorDia()[fecha]">
                        <div class="actividad-hora">
                            <span class="hora-inicio">{{ actividad.horaInicio }}</span>
                            <span class="separador">-</span>
                            <span class="hora-fin">{{ actividad.horaFin }}</span>
                            <span class="duracion">
                                ({{ formatearDuracion(calcularDuracion(actividad.horaInicio, actividad.horaFin)) }})
                            </span>
                        </div>

                        <div class="actividad-contenido">
                            <h4>{{ limpiarNombreActividad(actividad.nombre) }}</h4>
                            <p *ngIf="actividad.descripcion">{{ actividad.descripcion }}</p>
                            <div class="actividad-meta">
                                <span class="tipo" *ngIf="actividad.tipoActividad">
                                    ğŸ·ï¸ {{ actividad.tipoActividad }}
                                </span>
                                <span class="ubicacion" *ngIf="actividad.ubicacion_planeada">
                                    ğŸ“ {{ actividad.ubicacion_planeada }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MENSAJE SI NO HAY ACTIVIDADES -->
        <div class="no-actividades" *ngIf="viaje!.actividades.length === 0">
            <p>âš ï¸ Este viaje aÃºn no tiene actividades planificadas.</p>
        </div>

    </div>

</div>